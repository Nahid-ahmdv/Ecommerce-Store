<!--All the other templates are gonna utilize this 'base'. So on this 'base' template l'm gonna need -->
{% load static %}
<!--we might have some static files, (static files refer to for example files like CSS pages which we kind of potentially need to set up for our project)-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--را AJAX را لود کنیم و بعد در پایین jquery این اسکریپت را بالا نوشتیم برای اینکه احتیاج داریم اول-->
    <title>{% block title %}My Shop{% endblock %}</title> <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <nav class="navbar navbar-expand-lg" style="background-color: #e3fdf6;">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"><b>Shop</b></a>
            <!--slash '/' is referring to the root directory of my server-->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!--drop-down menu for categories-->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Categories
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="{% url "store:product_all" %}">All</a></li>
                            {% for c in categories %}
                            <li {% if category.slug == c.slug %}class="selected" {% endif %}></li>
                            <a class="dropdown-item" href="{{ c.get_absolute_url }}">
                                {{ c.name|title}}
                                <!-- اون تایتل حرف اول رو بزرگ می‌نویسهThe pipe (|) character is used to apply a filter to the variable preceding it. In this case, the filter being applied is 'title'. The 'title' filter transforms the string into title case, meaning that it capitalizes the first letter of each word and makes the rest of the letters lowercase.-->
                            </a>
                    </li>
                    {% endfor %}
                </ul>
                </li>
                </ul>
                <form class="d-flex my-2 my-lg-0" action="/search/" method="get">
                    <!--ما را به صفحه سرچ میفرسد-->
                    <input class="form-control mr-sm-2 search-input" name="h" type="search" placeholder="Search"
                        aria-label="Search" required>
                    <!--here 'h' is basically the name of the parameter that's gonna be utilized in the url to make a get request-->
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </form>



                <a type="button" role="button" href="{% url 'basket:basket_summary' %}"
                    class="btn btn-outline-success my-2 my-sm-0" style="margin-left: 20px;">
                    <!--We're asking Django to look for the 'app_name' that is equal to 'basket' and then we're asking it to look for the url (link) named 'basket_summary'. So it's just basically going to generate this url, based on this path, for me.-->

                    {% with total_qty=basket|length %}  <!--The 'basket' here is coming from the context_processor. that 'length' is essentially gonna call the '__len__' method in basket.py-->
                    <!--In Django templates, the 'length' filter is used to get the number of items in a collection, such as a list or a dictionary. When you apply the 'length' filter to an object, Django checks if that object has a '__len__()' method defined.-->
                    <div id="basket-qty" class="d-inline-flex">
                        <!--This class puts all the div's subsequent elements in a row-->
                        {% if total_qty > 0 %}
                        {{ total_qty }}
                        {% else %}
                        0
                        {% endif %}
                    </div>
                    {% endwith %}

                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-basket-fill" viewBox="0 0 16 16">
                        <path
                            d="M5.071 1.243a.5.5 0 0 1 .858.514L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H15v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9H.5a.5.5 0 0 1-.5-.5v-2A.5.5 0 0 1 .5 6h1.717zM3.5 10.5a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0zm2.5 0a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0z" />
                    </svg>
                    Basket
                </a>

            </div>
        </div>
    </nav>
    <style>
        .small {
            font-size: 0.875rem;
            color: #4b4b4b;
        }

        .card {
            transition: box-shadow 0.3s;
            /* Optional: smooth shadow transition */
        }

        .card:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            /* Optional: add shadow on hover */
        }

        .post-title {
            display: inline-block;
            /* Allows the underline to be applied only to the text */
            position: relative;
            /* Needed for positioning the pseudo-element */
            color: #333;
            /* Text color */
            text-decoration: none;
            /* Remove default underline */
        }

        .post-title::after {
            content: '';
            /* Create an empty pseudo-element */
            position: absolute;
            /* Position it relative to the title */
            width: 100%;
            /* Full width of the text */
            height: 2px;
            /* Height of the underline */
            background-color: #0087ca;
            /* Color of the underline */
            bottom: 0;
            /* Position it at the bottom of the text */
            left: 0;
            /* Align it to the left */
            transform: scaleX(0);
            /* Start hidden */
            transition: transform 0.3s ease;
            /* Smooth transition for the effect */
        }

        .card:hover .post-title::after {
            transform: scaleX(1);
            /* Show underline on hover over the card */
        }

        .search-input {
            margin-right: 5px;
            /* Adjust the value as needed */
        }

        .d-none {
            display: none;
        }

        #toggle-description {
            text-decoration: none;
            transition: text-shadow 0.2s ease;
        }

        #toggle-description:hover {
            text-shadow: 1px 0 0 currentColor;
        }
    </style>
</head>

<body class="bg-light">
    {% block content %}

    {% endblock %}
</body>

</html>