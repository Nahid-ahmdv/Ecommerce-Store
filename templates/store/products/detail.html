{% extends "store/base.html" %}
{% load static %}
{% block title %}
{{ product.name }}
{% endblock %}

{% block content %}
<div class="container my-5">
    <main>
        <div class="row g-4">
            <div class="col-md-5 col-lg-5 order-md-first">
                <img class="img-fluid rounded shadow" alt="{{ product.title }}" src="{{ product.image.url }}">
            </div>
            <div class="col-md-7 col-lg-7">
                <h1 class="mb-3 h4 text-primary">{{ product.title }}</h1>
                <p class="lead text-muted"><span class="fw-bold">{{ product.author }}</span> (Author)</p>
                
                <div id="description-container">
                    <div class="product-description">
                        <p style="color: black;" id="short-description">
                            <span class="a-text-bold">{{ product.description|safe|slice:":355" }}...</span>
                        </p>
                        <!-- Full description is hidden initially -->
                        <p style="color: black;" class="d-none" id="full-description">{{ product.description|safe }}</p>
                    </div>
                </div>
                
                <button id="toggle-description" class="btn btn-link p-0 text-primary" style="text-decoration: none;">Read More</button>

                <div class="card border-light mt-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between border-bottom pb-2 mb-3">
                            <div>Format: Hardback</div>
                            <div><span class="h4 fw-bold text-success">Â£{{ product.price }}</span></div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <label for="quantity" class="form-label">Qty</label>
                                <select id="select">
                                    <option value="">1</option>
                                    <option value="">2</option>
                                    <option value="">3</option>
                                    <option value="">4</option>
                                </select>
                            </div>
                            <button type="button" class="btn btn-primary btn-sm">Add to Basket</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
$(document).ready(function() {
    $("#toggle-description").click(function() {
        // Toggle visibility of short and full descriptions
        $("#short-description").toggleClass("d-none"); // Hide short description
        $("#full-description").toggleClass("d-none"); // Show full description
        
        // Change button text based on current state
        $(this).text($(this).text() === "Read More" ? "Read Less" : "Read More");
    });
});
</script>

{% endblock %}
